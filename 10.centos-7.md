# CentOS 7 Installation

#### Shutdown

```
# shutdown -P now
```

#### Restart

```
# shutdown -r now
```

#### Sudoers

```
# vi /etc/sudoers
# cat /etc/sudoers
...
## Allows people in group wheel to run all commands
#%wheel	ALL=(ALL)	ALL

## Same thing without a password
%wheel	ALL=(ALL)	NOPASSWD: ALL
...
```

#### Hostname

```
# hostnamectl set-hostname NEW_HOST_NAME
# hostname
```

#### Root

```
# vi /etc/ssh/sshd_config
# cat /etc/ssh/sshd_config
...
PermitRootLogin no
...
```
- Root 접속 제한

#### Password

- minlen: 최소 패스워드 길이 설정
- lcredit: 영문 소문자 포함
- ucredit: 영문 대문자 포함
- dcredit: 숫자 포함
- ocredit: 특수문자 포함
```
# vi /etc/security/pwquality.conf
# cat /etc/security/pwquality.conf
...
minlen = 8
dcredit = -1
lcredit = -1
ocredit = -1
...
```

- PASS_MAX_DAYS: 최대 패스워드 사용기간 설정
- PASS_MIN_DAYS: 최소 패스워드 사용기간 설정
- PASS_MIN_LEN: 최소 패스워드 길이 설정
```
# vi /etc/login.defs
# cat /etc/login.defs
...
PASS_MAX_DAYS    90
PASS_MIN_DAYS    1
PASS_MIN_LEN     8
PASS_WARN_AGE    7
...
```

- deny=5 : 5회 입력 실패 시 패스워드 잠금
- unlock_time : 계정 잠김 후 마지막 계정 실패 시간부터 설정된 시간이 지나면 자동 계정 잠김 해제 (단위: 초)
- no_magic_root : root에게는 패스워드 잠금 설정을 적용하지 않음
- reset : 접속 시도 성공 시 실패한 횟수 초기화
```
# vi /etc/pam.d/system-auth
# cat /etc/pam.d/system-auth
...
auth     required  /lib/security/pam_tally.so deny=5 unlock_time=120 no_magic_root
account  required  /lib/security/pam_tally.so no_magic_root reset
```

#### Session

- 단위: 
```
# vi /etc/profile
# cat /etc/profile
...
TIMEOUT=600
export TIMEOUT

# source /etc/profile
```

#### IPv6

```
# vi /etc/default/grub
# cat /etc/default/grub
...
GRUB_CMDLINE_LINUX="ipv6.disable=1 crashkernel=auto ...
...
```

#### Network

```
# cat /etc/sysconfig/network-scripts/ifcfg-eth0
...
BOOTPROTO=none
IPV6INIT=no
...
# 
# nmtui-edit eth0
# shutdown -r now
# curl http://ifconfig.me
```

#### Install Utils

```
# yum install -y epel-release
# yum install -y net-tools
# yum install -y htop
```

#### NTP

```
# yum install -y ntp
# vi /etc/ntp.conf
# cat /etc/ntp.conf
...
server kr.pool.ntp.org
server time.bora.net
server time.nuri.net
...
# systemctl enable ntpd
# systemctl start ntpd
# ntpq -p
# timedatectl set-ntp yes
# timedatectl set-timezone Asia/Seoul
# date
```

#### Cockpit

```
# yum install -y cockpit
# firewall-cmd --permanent --zone=public --add-service=cockpit
# systemctl enable --now cockpit.socket
# curl http://127.0.0.1:9090
```

#### Java

```
# yum install -y java-1.8.0-openjdk
# alternatives --list | grep java
# alternatives --config java
```

#### Python

```
# yum install -y python3
# alternatives --list | grep python
# ls /bin | grep python/mnt
python
python2
python2.7
python3
python3.6
```

#### Nginx

```
# yum install -y nginx
# netstat -anop | grep 80
# systemctl disable nginx
```

#### NAS

```
# yum install -y samba-client samba-common cifs-utils
# mkdir -p /mnt/nas0000
# chmod 660 /mnt/nas0000
# vi /root/.nas0000
# cat /root/.nas0000
username=seung
password=password

# chmod 600 /root/.nas0000
# vi /etc/fstab
# cat /etc/fstab
...
//seung.kr/nas /mnt/nas0000 cifs credentials=/root/.nas0000 0 0
...
# mount -a
# ls -al /mnt/nas0000
# umount /mnt/nas0000
```

#### Yum Clean

```
# yum clean all
```

